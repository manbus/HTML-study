<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>弹力球</title>
    <style media="screen">
      *{
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>

    <canvas id="canvas">浏览器不支持canvas</canvas>

    <script type="text/javascript">
      var can = document.getElementById("canvas");
      can.width = 600;
      can.height = 500;
      can.style.border = '1px solid red';

      var ctx = can.getContext("2d");
      var x = 50,y = 50, vx = 2, vy = 0, gy = 1;
      var timer = setInterval(function(){
        //render
        can.width = can.width;
        ctx.fillStyle = 'red';
        ctx.arc(x,y,20,0,Math.PI * 2,false);
        ctx.fill();

        //update
        x += vx;
        y += vy;
        vy += gy;

        if( y > can.height - 20){
          y = can.height - 20;
          vy = -vy * 0.7;
          vy = Math.abs(vy) < 4 ? 0 : vy;

          if (vy === 0){
            vx = 0;
            clearInterval(timer);
          }
        } else if ( y < 20 ) {
          y = 20;
          vy = -vy * 0.7;
        }
      },50);
    </script>

  </body>
</html>
